#include <SFML/Graphics.hpp>
#include <pthread.h>
#include <unistd.h>
#include <iostream>
#include <vector>

static const int wall_pixels = 30;

class GameBoard {
private:
    static const int upper_limit = 4;

    int boardXsize, boardYsize;
    std::vector<std::vector<int>> board;

    sf::RectangleShape wall;
public:
    GameBoard(int WINDOW_WIDTH, int WINDOW_HEIGHT) : boardXsize(WINDOW_WIDTH/wall_pixels), boardYsize(WINDOW_HEIGHT/wall_pixels), board(boardYsize, std::vector<int>(boardXsize)),
                                                     wall (sf::Vector2f(wall_pixels, wall_pixels)) 
    { 
        board = { 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, 
            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0, 0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1}, 
        
            {1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0, 0,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0, 0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0, 0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0, 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0, 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, 
            {1,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,1}, 
            {1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1}, 
            {1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1}, 
            {1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1}, 
            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, 
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1} 
        }; 
    }

    int getBoard(int row, int column) { return board[row][column];  }
    int getBoardXSize() {   return boardXsize;  }
    int getBoardYSize() {   return boardYsize;  }

    void drawGameBoard(sf::RenderWindow& window) {
        for(int row=upper_limit; row<boardYsize; row++) {
            for(int col=0; col<boardXsize; col++) {
                if(board[row][col] == 1) {
                    wall.setPosition(col * wall_pixels, row * wall_pixels);
                    wall.setFillColor(sf::Color::Blue);
                    window.draw(wall);
                }
            }
        }
    }
};
